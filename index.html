<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!-- Set base for GitHub Pages (adjust 'monkeynad.fun' if needed) -->
    <base href="/monkeynad.fun/">
    <link rel="icon" href="favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="title" content="ApeEscape Remastered" />
    <meta name="description" content="ApeEscape BananaFarm" />
    <meta name="keywords" content="ApeEscape, BNB, DAPP, BananaFarm" />
    <link rel="apple-touch-icon" href="logo.png" />
    <meta property="og:image" content="logo.png" />
    <meta property="og:image:secure_url" content="logo.png" />
    <meta property="og:image:alt" content="ApeEscape Bananafarm" />
    <meta property="og:title" content="ApeEscape Bananafarm" />
    <meta property="og:description" content="BananaFarm" />
    <link rel="manifest" href="manifest.json" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
      rel="stylesheet"
    />
    <style>
      @font-face {
        font-family: "PoseyTextured";
        src: url("poseytextured.woff2") format("woff2");
      }
      body {
        font-family: "PoseyTextured", Montserrat, sans-serif;
      }
    </style>
    <title>ApeEscape Bananafarm</title>
    <!-- Wallet detection and dynamic script loader -->
    <script>
      console.log("Starting wallet detection...");
      function detectWallet(callback) {
        let attempts = 0;
        const interval = setInterval(function () {
          console.log(
            "Attempt", attempts,
            "window.SafePalWallet:", window.SafePalWallet,
            "window.solana:", window.solana
          );
          // Check for SafePal wallet first
          if (window.SafePalWallet) {
            console.log("SafePal wallet detected");
            window.CLVWallet = window.SafePalWallet;
            clearInterval(interval);
            callback();
          }
          // Then check for Phantom wallet
          else if (window.solana && window.solana.isPhantom) {
            console.log("Phantom wallet detected");
            window.CLVWallet = window.solana;
            clearInterval(interval);
            callback();
          } else {
            attempts++;
            // Wait up to 2 seconds (20 x 100ms) for wallet injection
            if (attempts >= 20) {
              clearInterval(interval);
              console.error("No supported wallet found. Please install SafePal or Phantom wallet.");
              document.addEventListener("DOMContentLoaded", function () {
                document.getElementById("root").innerHTML =
                  "<p>Please install SafePal or Phantom wallet to use this application.</p>";
              });
              throw new Error("No supported wallet found");
            }
          }
        }, 100);
      }
      
      detectWallet(function () {
        console.log("Wallet detected, loading main script...");
        var script = document.createElement("script");
        script.src = "static/js/main.41b81be2.js";
        script.defer = true;
        document.head.appendChild(script);
      });
    </script>
    <link href="static/css/main.e07792ef.css" rel="stylesheet" />
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
</html>
